(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["791af348"],{"49e0":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"row justify-center",attrs:{padding:""}},[a("div",{staticStyle:{width:"500px","max-width":"95vw"}},[a("q-breadcrumbs",{attrs:{separator:">","active-color":"blue-grey-10",color:"light"}},[a("q-breadcrumbs-el",{attrs:{label:"主畫面",to:"/main"}}),a("q-breadcrumbs-el",{attrs:{label:"作業繳交",to:"/main/hw"}})],1),a("br"),e._l(e.items,(function(t){return a("div",{key:t.id},[a("q-expansion-item",{attrs:{popup:"",icon:"chrome_reader_mode",label:t.標題,sublabel:t.公告日期}},[a("div",{staticClass:"q-pa-sm"},[e._v(e._s(t.內文))]),a("div",{staticClass:"q-pa-sm"},[a("input",{attrs:{id:"filename",type:"file"},on:{change:function(t){return e.sendImage(t)}}})]),a("div",{staticClass:"q-pa-sm"},[a("q-btn",{attrs:{label:"上傳"},on:{click:function(t){return e.up()}}})],1),a("q-linear-progress",{attrs:{stripe:"",rounded:"",size:"25px",value:e.progress,color:"red"}},[a("div",{staticClass:"absolute-full flex flex-center"},[a("q-badge",{attrs:{color:"white","text-color":"red",label:e.progressLabel1}})],1)])],1)],1)})),a("q-page-container",[a("router-view")],1)],2)])},o=[],l=(a("7f7f"),a("8aa5")),n=a.n(l),r={created:function(){var e=this;n.a.auth().onAuthStateChanged((function(t){if(t){console.log("login success");var a,s=n.a.auth().currentUser;s.email,a=s.email.substring(0,10),e.sid=a,n.a.database().ref("users/"+e.sid).once("value",(function(t){console.log(t.val().username),e.uploader=t.val().username,e.nowclass=t.val().nowclass;var a=e.nowclass;n.a.database().ref("hw/"+a).once("value",(function(t){e.items=t.val(),console.log(e.nowclass),console.log(t.val())}))}))}}))},computed:{progressLabel1:function(){return 100*this.progress.toFixed(2)+"%"}},methods:{sendImage:function(e){console.log(e),console.log(e.target.files[0]);var t=e.target.files[0],a=this.sid+this.uploader+"_".concat(t.name),s={contentType:"/*"};this.file=t,this.fileName=a,this.metadata=s,console.log("沒問題")},up:function(){var e=this;if(""==document.getElementById("filename").value)this.$swal({type:"warning",title:"請先選擇檔案"});else{console.log(this.file);var t=n.a.storage().ref(this.nowclass+"/").child(this.fileName).put(this.file,this.metadata);t.on("state_changed",(function(t){console.log(e),e.progress=t.bytesTransferred/t.totalBytes;var a=t.bytesTransferred/t.totalBytes*100;switch(console.log(e.progress),this.progress=a,console.log("Upload is "+a+"% done"),t.state){case n.a.storage.TaskState.PAUSED:console.log("Upload is paused");break;case n.a.storage.TaskState.RUNNING:console.log("Upload is running");break}}),(function(e){}),(function(){console.log(this),t.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e)})),e.$swal({type:"success",title:"上傳成功 !"}),document.getElementById("filename").value=""}))}}},data:function(){return{url:"",sid:"",nowclass:"",items:[],progress:0,file:"",fileName:"",metadata:[]}}},i=r,c=(a("6ed0"),a("2877")),u=Object(c["a"])(i,s,o,!1,null,null,null);t["default"]=u.exports},"55c9":function(e,t,a){},"6ed0":function(e,t,a){"use strict";var s=a("55c9"),o=a.n(s);o.a}}]);